<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Color Guesser Game</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Screen: Card Stack (Game + Result) -->
    <div id="screen-cards" class="screen screen-cards">
        <div class="page-title">
            <h1>Color guesser</h1>
            <div class="round-badge" id="round-badge">1 / 4</div>
        </div>
        <div class="spacer"></div>
        <div class="card-stack" id="card-stack">
            <div class="card-back card-back-3"></div>
            <div class="card-back card-back-2"></div>
            <div class="card-back card-back-1"></div>
            <div class="card-front" id="card-front">
                <!-- Game content -->
                <div id="card-game" class="card-content">
                    <div class="target-section">
                        <div id="target-color" class="color-swatch"></div>
                        <p class="target-label">Найди этот цвет</p>
                    </div>
                    <div class="wheel-container">
                        <canvas id="color-wheel"></canvas>
                        <div id="picker-cursor" class="picker-cursor hidden"></div>
                    </div>
                </div>
                <!-- Result content -->
                <div id="card-result" class="card-content" style="display:none">
                    <div class="result-colors">
                        <div class="result-color-block">
                            <div id="result-target" class="color-swatch"></div>
                            <span>Задание</span>
                        </div>
                        <div class="result-color-block">
                            <div id="result-picked" class="color-swatch"></div>
                            <span>Твой выбор</span>
                        </div>
                    </div>
                    <p id="result-accuracy" class="accuracy-text"></p>
                    <p id="result-percentile" class="percentile-text"></p>
                </div>
            </div>
        </div>
        <div class="score-bar">Очки: <span id="total-score-label">0</span></div>
        <div class="bottom-buttons">
            <button id="btn-confirm" class="btn btn-primary" disabled>Подтвердить</button>
            <button id="btn-next" class="btn btn-primary" style="display:none">Далее</button>
        </div>
        <div class="spacer"></div>
    </div>

    <!-- Screen: Pick which score to keep -->
    <div id="screen-pick-score" class="screen">
        <h2>У тебя уже есть результаты</h2>
        <p class="pick-score-hint">Выбери, какой результат оставить в рейтинге:</p>
        <div class="score-list" id="score-list"></div>
        <button id="btn-pick-save" class="btn btn-primary" disabled>Сохранить</button>
    </div>

    <!-- Screen: Leaderboard -->
    <div id="screen-leaderboard" class="screen screen-leaderboard">
        <div class="page-title">
            <h1>Color guesser</h1>
        </div>
        <p class="section-subtitle">Рейтинг</p>
        <div class="leaderboard-wrapper">
            <table id="leaderboard-table">
                <thead>
                    <tr>
                        <th>Место</th>
                        <th>Ник</th>
                        <th>Очки</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
        </div>
        <button id="btn-restart" class="btn btn-primary">Играть ещё</button>
    </div>

    <script src="game.js"></script>
</body>
</html>
